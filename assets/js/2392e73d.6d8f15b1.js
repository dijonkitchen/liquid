"use strict";(self.webpackChunkliquid_docs=self.webpackChunkliquid_docs||[]).push([[5670],{1719:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>l,default:()=>u,frontMatter:()=>i,metadata:()=>o,toc:()=>s});var r=n(3117),a=(n(7294),n(3905));const i={},l="Extra Filters",o={unversionedId:"extra/filters",id:"extra/filters",title:"Extra Filters",description:"_New in version 1.5.0_",source:"@site/docs/extra/filters.md",sourceDirName:"extra",slug:"/extra/filters",permalink:"/liquid/extra/filters",draft:!1,editUrl:"https://github.com/jg-rp/liquid/tree/docs/docs/extra/filters.md",tags:[],version:"current",frontMatter:{},sidebar:"languageSidebar",previous:{title:"Extra Tags and Filters",permalink:"/liquid/extra/introduction"},next:{title:"Extra Tags",permalink:"/liquid/extra/tags"}},p={},s=[{value:"index",id:"index",level:2},{value:"json",id:"json",level:2},{value:"script_tag",id:"script_tag",level:2},{value:"stylesheet_tag",id:"stylesheet_tag",level:2}],d={toc:s};function u(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,r.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"extra-filters"},"Extra Filters"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},(0,a.kt)("em",{parentName:"strong"},"New in version 1.5.0"))),(0,a.kt)("p",null,"This page documents extra filters that are not included in standard Liquid. See the ",(0,a.kt)("a",{parentName:"p",href:"/liquid/language/filters"},"filter reference")," for a details of all standard filters. Each filter described here must be registered with a ",(0,a.kt)("a",{parentName:"p",href:"/liquid/api/Environment"},(0,a.kt)("inlineCode",{parentName:"a"},"liquid.Environment"))," to make it available to templates rendered from that environment."),(0,a.kt)("h2",{id:"index"},"index"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"<array> | index: <object>")),(0,a.kt)("p",null,"Return the zero-based index of the first occurrence of the argument object in the input array. If the argument object is not in the array, ",(0,a.kt)("inlineCode",{parentName:"p"},"nil")," is returned."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},'from liquid import Environment\nfrom liquid.extra import filters\n\nenv = Environment()\nenv.add_filter("index", filters.index)\n\ntemplate = env.from_string("""\\\n{% assign colors = "red, blue, green" | split: ", "%}\n{{ colors | index: \'blue\' }}\n""")\n\nprint(template.render())\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-plain",metastring:'title="output"',title:'"output"'},"1\n")),(0,a.kt)("h2",{id:"json"},"json"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"<object> | json")),(0,a.kt)("p",null,"Serialize an object as a JSON (JavaScript Object Notation) formatted string."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},'from liquid import Environment\nfrom liquid.extra import filters\n\nenv = Environment()\nenv.add_filter("json", filters.JSON())\n\ntemplate = env.from_string("""\\\n<script type="application/json">\n  {{ product | json }}\n<\/script>\n""")\n\ndata = {\n  "product": {\n    "id": 1234,\n    "name": "Football"\n  }\n}\n\nprint(template.render(**data))\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-html",metastring:"title=output",title:"output"},'<script type="application/json">\n  { "id": 1234, "name": "Football" }\n<\/script>\n')),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"json")," filter uses Python's default ",(0,a.kt)("a",{parentName:"p",href:"https://docs.python.org/3.8/library/json.html#json.JSONEncoder"},(0,a.kt)("inlineCode",{parentName:"a"},"JSONEncoder")),", supporting ",(0,a.kt)("inlineCode",{parentName:"p"},"dict"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"list"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"tuple"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"str"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"int"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"float"),", some Enums, ",(0,a.kt)("inlineCode",{parentName:"p"},"True"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"False")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"None"),"."),(0,a.kt)("p",null,"When registering the ",(0,a.kt)("inlineCode",{parentName:"p"},"JSON")," filter, you can optionally pass a ",(0,a.kt)("inlineCode",{parentName:"p"},"default")," argument. ",(0,a.kt)("inlineCode",{parentName:"p"},"default")," will be passed to ",(0,a.kt)("inlineCode",{parentName:"p"},"json.dumps")," and should be a function that gets called for objects that can't otherwise be serialized. For example, this default function adds support for serializing ",(0,a.kt)("a",{parentName:"p",href:"https://docs.python.org/3/library/dataclasses.html"},"data classes"),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},'from dataclasses import dataclass\nfrom dataclasses import asdict\nfrom dataclasses import is_dataclass\n\nfrom liquid import Environment\nfrom liquid.extra import filters\n\nenv = Environment()\n\ndef default(obj):\n    if is_dataclass(obj):\n        return asdict(obj)\n    raise TypeError(f"can\'t serialize object {obj}")\n\nenv.add_filter("json", filters.JSON(default=default))\n')),(0,a.kt)("h2",{id:"script_tag"},"script_tag"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"<string> | script_tag")),(0,a.kt)("p",null,"Return an HTML ",(0,a.kt)("inlineCode",{parentName:"p"},"script")," tag, as a string, with ",(0,a.kt)("inlineCode",{parentName:"p"},"src")," equal to the input string, which should be a URL."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},'from liquid import Environment\nfrom liquid.extra import filters\n\nenv = Environment()\nenv.add_filter("script_tag", filters.script_tag)\n\ntemplate = env.from_string("{{ url | script_tag }}")\nprint(template.render(url="https://example.com/static/app.js"))\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-plain",metastring:'title="output"',title:'"output"'},'<script src="https://example.com/static/app.js" type="text/javascript"><\/script>\n')),(0,a.kt)("h2",{id:"stylesheet_tag"},"stylesheet_tag"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"<string> | stylesheet_tag")),(0,a.kt)("p",null,"Return an HTML ",(0,a.kt)("inlineCode",{parentName:"p"},"link")," tag, as a string, with ",(0,a.kt)("inlineCode",{parentName:"p"},"href")," equal to the input string, which should be a URL."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},'from liquid import Environment\nfrom liquid.extra import filters\n\nenv = Environment()\nenv.add_filter("stylesheet_tag", filters.stylesheet_tag)\n\ntemplate = env.from_string("{{ url | stylesheet_tag }}")\nprint(template.render(url="https://example.com/static/style.css"))\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-plain",metastring:'title="output"',title:'"output"'},'<link href="https://example.com/static/style.css" rel="stylesheet" type="text/css" media="all" />\n')))}u.isMDXComponent=!0},3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>m});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var p=r.createContext({}),s=function(e){var t=r.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},d=function(e){var t=s(e.components);return r.createElement(p.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},c=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,p=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),c=s(n),m=a,f=c["".concat(p,".").concat(m)]||c[m]||u[m]||i;return n?r.createElement(f,l(l({ref:t},d),{},{components:n})):r.createElement(f,l({ref:t},d))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,l=new Array(i);l[0]=c;var o={};for(var p in t)hasOwnProperty.call(t,p)&&(o[p]=t[p]);o.originalType=e,o.mdxType="string"==typeof e?e:a,l[1]=o;for(var s=2;s<i;s++)l[s]=n[s];return r.createElement.apply(null,l)}return r.createElement.apply(null,n)}c.displayName="MDXCreateElement"}}]);